<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VORTEX</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    body {
      height: 100vh;
      overflow: hidden;
      background: black;
      color: white;
    }

    /* ===== BACKGROUND ===== */
    .background {
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, #0b0f17, #111b2e, #0b0f17);
      background-size: 300% 300%;
      animation: bgMove 12s infinite linear;
      filter: blur(3px);
      z-index: -2;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .darkOverlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
      z-index: -1;
    }

    /* ===== TOP BAR ===== */
    .topBar {
      position: absolute;
      top: 15px;
      left: 0;
      width: 100%;
      padding: 0 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 20px;
      opacity: 0.92;
      z-index: 50;
    }

    .topLeft {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .topRight {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .clockBtn, .tempBtn {
      background: transparent;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      transition: 0.2s;
    }

    .clockBtn:hover, .tempBtn:hover {
      opacity: 0.7;
    }

    .city {
      font-size: 16px;
      opacity: 0.7;
    }

    .weatherIcon {
      font-size: 22px;
    }

    /* ===== CENTER TITLE ===== */
    .title {
      position: absolute;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 80px;
      font-weight: 700;
      letter-spacing: 8px;
      opacity: 0.16;
      text-transform: uppercase;
      z-index: 10;
    }

    /* ===== DOCK ===== */
    .dock {
      position: fixed;
      bottom: 25px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 18px;
      padding: 12px 20px;
      border-radius: 30px;
      background: rgba(0, 60, 160, 0.25);
      backdrop-filter: blur(18px);
      box-shadow: 0 0 25px rgba(0,0,0,0.65);
      z-index: 9999;
    }

    .dockBtn {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255,255,255,0.10);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: 0.2s;
    }

    .dockBtn:hover {
      transform: scale(1.15);
      background: rgba(255, 255, 255, 0.14);
    }

    .dockBtn.active {
      background: rgba(255, 255, 255, 0.20);
      border: 1px solid rgba(255,255,255,0.25);
    }

    .dockBtn svg {
      width: 26px;
      height: 26px;
      stroke: white;
      stroke-width: 2;
      fill: none;
      opacity: 0.92;
    }

    /* ===== FULLSCREEN APP SCREEN ===== */
    .appScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: calc(100% - 95px);
      background: rgba(10, 15, 25, 0.82);
      backdrop-filter: blur(22px);
      display: none;
      z-index: 500;
      padding: 30px;
    }

    .appScreen.active {
      display: block;
    }

    /* ===== CHAT APP ===== */
    .chatPanel {
      width: 100%;
      height: 100%;
      border-radius: 22px;
      background: rgba(20, 20, 30, 0.6);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(0,0,0,0.55);
    }

    .chatHeader {
      padding: 18px;
      font-weight: bold;
      font-size: 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      opacity: 0.9;
    }

    .chatMessages {
      flex: 1;
      padding: 18px;
      overflow-y: auto;
      font-size: 16px;
      opacity: 0.85;
    }

    .chatInputArea {
      display: flex;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .chatInputArea input {
      flex: 1;
      padding: 14px;
      border: none;
      outline: none;
      background: rgba(255,255,255,0.08);
      color: white;
      font-size: 16px;
    }

    .chatInputArea button {
      padding: 14px 18px;
      border: none;
      cursor: pointer;
      background: rgba(0, 120, 255, 0.6);
      color: white;
      font-weight: bold;
      font-size: 16px;
    }

    /* ===== MUSIC APP ===== */
    .musicPanel {
      width: 100%;
      height: 100%;
      border-radius: 22px;
      display: flex;
      gap: 20px;
      padding: 20px;
      background: rgba(10, 15, 25, 0.5);
      box-shadow: 0 0 30px rgba(0,0,0,0.55);
    }

    .musicLeft,
    .musicRight {
      flex: 1;
      border-radius: 22px;
      background: rgba(255, 255, 255, 0.06);
      padding: 18px;
      display: flex;
      flex-direction: column;
    }

    .albumArt {
      width: 100%;
      height: 240px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .musicNote {
      font-size: 90px;
      opacity: 0.25;
      color: white;
    }

    .nowPlayingText {
      margin-top: 14px;
      color: white;
    }

    .songTitle {
      font-size: 22px;
      font-weight: 700;
      opacity: 0.95;
    }

    .songSub {
      font-size: 14px;
      opacity: 0.6;
      margin-top: 6px;
    }

    .progressBar {
      height: 6px;
      margin-top: 14px;
      border-radius: 99px;
      background: rgba(255, 255, 255, 0.15);
    }

    .musicControls {
      margin-top: auto;
      display: flex;
      justify-content: center;
      gap: 18px;
      padding-top: 18px;
    }

    /* Music buttons now match dock style */
    .musicControls button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255,255,255,0.10);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: 0.2s;
      color: white;
      font-size: 20px;
    }

    .musicControls button:hover {
      transform: scale(1.12);
      background: rgba(255, 255, 255, 0.14);
    }

    .musicControls .playBtn {
      width: 74px;
      height: 74px;
      font-size: 22px;
      background: rgba(255, 255, 255, 0.18);
      border: 1px solid rgba(255,255,255,0.20);
    }

    .musicSearchBar {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.08);
      color: white;
    }

    .musicSearchBar input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: white;
      font-size: 15px;
    }

    .searchIcon {
      opacity: 0.7;
    }

    .filterBtn,
    .hdBtn {
      border: none;
      background: rgba(255, 255, 255, 0.12);
      color: white;
      border-radius: 10px;
      padding: 7px 11px;
      cursor: pointer;
      font-size: 13px;
    }

    .filterBtn:hover,
    .hdBtn:hover {
      background: rgba(255, 255, 255, 0.22);
    }

    .musicResults {
      flex: 1;
      margin-top: 14px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.04);
      padding: 14px;
      color: white;
      overflow-y: auto;
    }

    .emptyResults {
      opacity: 0.35;
      font-size: 14px;
    }
  </style>
</head>

<body>
  <div class="background"></div>
  <div class="darkOverlay"></div>

  <!-- TOP BAR -->
  <div class="topBar">
    <div class="topLeft">
      <button class="clockBtn" id="clockBtn">--:--</button>
    </div>

    <div class="topRight">
      <span class="weatherIcon" id="weatherIcon">‚òÅÔ∏è</span>
      <button class="tempBtn" id="tempBtn">--¬∞</button>
      <span class="city" id="cityName">Loading...</span>
    </div>
  </div>

  <div class="title">VORTEX</div>

  <!-- FULLSCREEN APPS -->
  <div class="appScreen" id="chatScreen">
    <div class="chatPanel">
      <div class="chatHeader">AI Chat</div>
      <div class="chatMessages" id="chatMessages">
        <p><b>AI:</b> Hello. Welcome to VORTEX.</p>
      </div>
      <div class="chatInputArea">
        <input type="text" id="chatInput" placeholder="Type a message..." />
        <button id="sendBtn">Send</button>
      </div>
    </div>
  </div>

  <div class="appScreen" id="musicScreen"></div>

  <!-- DOCK -->
  <div class="dock" id="dock"></div>

  <script>
    const clockBtn = document.getElementById("clockBtn");
    const tempBtn = document.getElementById("tempBtn");
    const cityNameEl = document.getElementById("cityName");
    const weatherIconEl = document.getElementById("weatherIcon");

    const dock = document.getElementById("dock");

    const chatScreen = document.getElementById("chatScreen");
    const musicScreen = document.getElementById("musicScreen");

    const chatInput = document.getElementById("chatInput");
    const sendBtn = document.getElementById("sendBtn");
    const chatMessages = document.getElementById("chatMessages");

    let useMilitary = true;
    let useCelsius = false;

    let activeApp = null;

    let lastWeatherData = {
      tempC: null,
      tempF: null,
      city: null,
      icon: "‚òÅÔ∏è"
    };

    /* ===== CLOCK ===== */
    function updateClock() {
      const now = new Date();
      let hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2, "0");

      if (useMilitary) {
        clockBtn.textContent = `${hours.toString().padStart(2, "0")}:${minutes}`;
      } else {
        const ampm = hours >= 12 ? "PM" : "AM";
        hours = hours % 12 || 12;
        clockBtn.textContent = `${hours}:${minutes} ${ampm}`;
      }
    }

    clockBtn.addEventListener("click", () => {
      useMilitary = !useMilitary;
      updateClock();
    });

    /* ===== WEATHER ICONS ===== */
    function getWeatherIcon(code) {
      if (code === 0) return "‚òÄÔ∏è";
      if (code >= 1 && code <= 3) return "‚õÖ";
      if (code >= 45 && code <= 48) return "üå´";
      if (code >= 51 && code <= 67) return "üåß";
      if (code >= 71 && code <= 77) return "‚ùÑÔ∏è";
      if (code >= 80 && code <= 82) return "üå¶";
      if (code >= 95) return "‚õà";
      return "‚òÅÔ∏è";
    }

    function displayWeather() {
      if (useCelsius) {
        tempBtn.textContent = `${lastWeatherData.tempC}¬∞C`;
      } else {
        tempBtn.textContent = `${lastWeatherData.tempF}¬∞F`;
      }

      cityNameEl.textContent = lastWeatherData.city;
      weatherIconEl.textContent = lastWeatherData.icon;
    }

    async function updateWeather() {
      if (!navigator.geolocation) {
        tempBtn.textContent = "N/A";
        cityNameEl.textContent = "No GPS";
        return;
      }

      tempBtn.textContent = "Loading...";
      cityNameEl.textContent = "Locating...";

      navigator.geolocation.getCurrentPosition(
        async (pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          try {
            const weatherUrl =
              `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code`;

            const weatherRes = await fetch(weatherUrl);
            const weatherData = await weatherRes.json();

            const tempC = Math.round(weatherData.current.temperature_2m);
            const tempF = Math.round((tempC * 9) / 5 + 32);

            const code = weatherData.current.weather_code;
            const icon = getWeatherIcon(code);

            const geoUrl =
              `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&count=1`;

            const geoRes = await fetch(geoUrl);
            const geoData = await geoRes.json();

            const city = geoData.results?.[0]?.city || "Unknown";

            lastWeatherData.tempC = tempC;
            lastWeatherData.tempF = tempF;
            lastWeatherData.city = city;
            lastWeatherData.icon = icon;

            displayWeather();
          } catch (err) {
            console.error("Weather fetch failed:", err);
            tempBtn.textContent = "N/A";
            cityNameEl.textContent = "Weather unavailable";
          }
        },
        (err) => {
          console.error("Geolocation error:", err);
          tempBtn.textContent = "N/A";
          cityNameEl.textContent = "Location denied";
        }
      );
    }

    tempBtn.addEventListener("click", () => {
      useCelsius = !useCelsius;
      displayWeather();
    });

    /* ===== ICONS ===== */
    function svgIcon(type) {
      if (type === "home") {
        return `
          <svg viewBox="0 0 24 24">
            <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z"/>
          </svg>
        `;
      }

      if (type === "apps") {
        return `
          <svg viewBox="0 0 24 24">
            <rect x="4" y="4" width="6" height="6" rx="1"></rect>
            <rect x="14" y="4" width="6" height="6" rx="1"></rect>
            <rect x="4" y="14" width="6" height="6" rx="1"></rect>
            <rect x="14" y="14" width="6" height="6" rx="1"></rect>
          </svg>
        `;
      }

      if (type === "chat") {
        return `
          <svg viewBox="0 0 24 24">
            <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/>
          </svg>
        `;
      }

      if (type === "music") {
        return `
          <svg viewBox="0 0 24 24">
            <path d="M4 12v4a3 3 0 0 0 3 3h1v-7H7a3 3 0 0 0-3 3"/>
            <path d="M20 12v4a3 3 0 0 1-3 3h-1v-7h1a3 3 0 0 1 3 3"/>
            <path d="M8 12V9a4 4 0 0 1 8 0v3"/>
          </svg>
        `;
      }

      if (type === "games") {
        return `
          <svg viewBox="0 0 24 24">
            <path d="M6 16l-1.5 3.5a2 2 0 0 0 2.8 2.6L10 20h4l2.7 2.1a2 2 0 0 0 2.8-2.6L18 16"/>
            <path d="M6 16a6 6 0 0 1 12 0"/>
            <path d="M9 13h2"/>
            <path d="M10 12v2"/>
            <circle cx="16.5" cy="12.5" r="0.8" fill="white"></circle>
            <circle cx="18.5" cy="13.5" r="0.8" fill="white"></circle>
          </svg>
        `;
      }

      if (type === "settings") {
        return `
          <svg viewBox="0 0 24 24">
            <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
            <path d="M19.4 15a7.7 7.7 0 0 0 .1-1l2-1.5-2-3.5-2.4.7a7.6 7.6 0 0 0-1.7-1l-.4-2.5h-4l-.4 2.5a7.6 7.6 0 0 0-1.7 1l-2.4-.7-2 3.5 2 1.5a7.7 7.7 0 0 0 .1 1 7.7 7.7 0 0 0-.1 1l-2 1.5 2 3.5 2.4-.7a7.6 7.6 0 0 0 1.7 1l.4 2.5h4l.4-2.5a7.6 7.6 0 0 0 1.7-1l2.4.7 2-3.5-2-1.5a7.7 7.7 0 0 0-.1-1z"/>
          </svg>
        `;
      }

      return "";
    }

    function createDockButton(type, label, id = "") {
      const btn = document.createElement("div");
      btn.className = "dockBtn";
      btn.title = label;
      if (id) btn.id = id;
      btn.innerHTML = svgIcon(type);
      return btn;
    }

    /* ===== APP SYSTEM ===== */
    function openApp(appName) {
      chatScreen.classList.remove("active");
      musicScreen.classList.remove("active");

      document.querySelectorAll(".dockBtn").forEach(btn => btn.classList.remove("active"));

      if (activeApp === appName) {
        activeApp = null;
        return;
      }

      if (appName === "chat") {
        chatScreen.classList.add("active");
        document.getElementById("chatBtn").classList.add("active");
      }

      if (appName === "music") {
        musicScreen.classList.add("active");
        document.getElementById("musicBtn").classList.add("active");

        if (!musicScreen.innerHTML.trim()) {
          musicScreen.innerHTML = `
            <div class="musicPanel">
              <div class="musicLeft">
                <div class="albumArt">
                  <div class="musicNote">‚ô™</div>
                </div>

                <div class="nowPlayingText">
                  <div class="songTitle">Not Playing</div>
                  <div class="songSub">Try searching on the right</div>
                </div>

                <div class="progressBar"></div>

                <div class="musicControls">
                  <button>‚èÆ</button>
                  <button class="playBtn">‚ñ∂</button>
                  <button>‚è≠</button>
                </div>
              </div>

              <div class="musicRight">
                <div class="musicSearchBar">
                  <span class="searchIcon">üîç</span>
                  <input type="text" placeholder="Search any song" />
                  <button class="filterBtn">‚â°</button>
                  <button class="hdBtn">HD</button>
                </div>

                <div class="musicResults">
                  <div class="emptyResults">No songs yet...</div>
                </div>
              </div>
            </div>
          `;
        }
      }

      activeApp = appName;
    }

    /* ===== BUILD DOCK ===== */
    dock.appendChild(createDockButton("home", "Home"));
    dock.appendChild(createDockButton("apps", "Apps"));
    dock.appendChild(createDockButton("chat", "AI Chat", "chatBtn"));
    dock.appendChild(createDockButton("music", "Music", "musicBtn"));
    dock.appendChild(createDockButton("games", "Game Library"));
    dock.appendChild(createDockButton("settings", "Settings"));

    document.getElementById("chatBtn").addEventListener("click", () => openApp("chat"));
    document.getElementById("musicBtn").addEventListener("click", () => openApp("music"));

    /* ===== FAKE CHAT SYSTEM ===== */
    sendBtn.addEventListener("click", () => {
      const msg = chatInput.value.trim();
      if (!msg) return;

      const userMsg = document.createElement("p");
      userMsg.innerHTML = `<b>You:</b> ${msg}`;
      chatMessages.appendChild(userMsg);

      const aiMsg = document.createElement("p");
      aiMsg.innerHTML = `<b>AI:</b> (Gemini will go here soon...)`;
      chatMessages.appendChild(aiMsg);

      chatInput.value = "";
      chatMessages.scrollTop = chatMessages.scrollHeight;
    });

    /* ===== START SYSTEM ===== */
    updateClock();
    setInterval(updateClock, 1000);
    updateWeather();
  </script>
</body>
</html>
