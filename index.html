<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VORTEX</title>
</head>
<body>

<script>
  // ==========================
  // GLOBAL STYLE INJECTION
  // ==========================
  const style = document.createElement("style");
  style.textContent = `
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      color: white;
    }

    /* ===== Animated Background ===== */
    .background {
      position: fixed;
      inset: 0;
      background: linear-gradient(120deg, #000000, #222, #111, #000);
      background-size: 400% 400%;
      animation: bgMove 10s ease infinite;
      z-index: -3;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Vignette overlay */
    .vignette {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle, rgba(0,0,0,0.1) 20%, rgba(0,0,0,0.9) 90%);
      z-index: -2;
    }

    /* ===== Top HUD ===== */
    .top-hud {
      position: fixed;
      top: 18px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 180px;
      font-size: 22px;
      opacity: 0.85;
      letter-spacing: 1px;
      z-index: 5;
    }

    /* ===== Center Logo ===== */
    .logo {
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 80px;
      font-weight: 600;
      letter-spacing: 8px;

      background: linear-gradient(to bottom, #ffffff, #888888);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;

      text-shadow: 0px 0px 25px rgba(255,255,255,0.15);
      opacity: 0.85;
      z-index: 3;
    }

    /* ===== Bottom Dock ===== */
    .dock {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 30, 120, 0.65);
      border-radius: 40px;
      padding: 12px 22px;
      display: flex;
      gap: 22px;
      align-items: center;
      box-shadow: 0px 8px 30px rgba(0,0,0,0.6);
      backdrop-filter: blur(10px);
      z-index: 10;
    }

    .dock button {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      border: none;
      background: rgba(255,255,255,0.08);
      color: white;
      font-size: 22px;
      cursor: pointer;
      transition: 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .dock button:hover {
      background: rgba(255,255,255,0.18);
      transform: scale(1.12);
    }

    /* ===== Chat Panel ===== */
    .chat-panel {
      position: fixed;
      right: -380px;
      top: 0;
      width: 360px;
      height: 100vh;
      background: rgba(0,0,0,0.75);
      border-left: 1px solid rgba(255,255,255,0.15);
      backdrop-filter: blur(12px);
      transition: 0.3s ease;
      z-index: 20;
      display: flex;
      flex-direction: column;
    }

    .chat-panel.open {
      right: 0;
    }

    .chat-header {
      padding: 18px;
      font-size: 18px;
      font-weight: bold;
      border-bottom: 1px solid rgba(255,255,255,0.15);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-header button {
      background: transparent;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      opacity: 0.7;
    }

    .chat-header button:hover {
      opacity: 1;
    }

    .chat-messages {
      flex: 1;
      padding: 18px;
      overflow-y: auto;
      font-size: 14px;
      line-height: 1.4;
    }

    .msg {
      margin-bottom: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      max-width: 90%;
      white-space: pre-wrap;
    }

    .msg.ai {
      background: rgba(0, 90, 255, 0.25);
      border: 1px solid rgba(0, 90, 255, 0.35);
    }

    .msg.user {
      margin-left: auto;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
    }

    .chat-input {
      padding: 14px;
      border-top: 1px solid rgba(255,255,255,0.15);
      display: flex;
      gap: 10px;
    }

    .chat-input input {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .chat-input button {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background: rgba(0, 90, 255, 0.7);
      color: white;
      font-weight: bold;
      transition: 0.2s;
    }

    .chat-input button:hover {
      background: rgba(0, 90, 255, 0.95);
    }
  `;
  document.head.appendChild(style);

  // ==========================
  // HELPER FUNCTIONS
  // ==========================
  function createDiv(className, id) {
    const div = document.createElement("div");
    if (className) div.className = className;
    if (id) div.id = id;
    return div;
  }

  function createButton(text, title, id) {
    const btn = document.createElement("button");
    btn.textContent = text;
    btn.title = title;
    if (id) btn.id = id;
    return btn;
  }

  // ==========================
  // BUILD UI ELEMENTS
  // ==========================
  const background = createDiv("background");
  const vignette = createDiv("vignette");

  const topHud = createDiv("top-hud");
  const timeEl = createDiv(null, "time");
  const tempEl = createDiv(null, "temp");

  timeEl.textContent = "--:--";
  tempEl.textContent = "Loading...";

  topHud.appendChild(timeEl);
  topHud.appendChild(tempEl);

  const logo = createDiv("logo");
  logo.textContent = "VORTEX";

  const dock = createDiv("dock");
  dock.appendChild(createButton("ğŸ®", "Games"));
  dock.appendChild(createButton("ğŸµ", "Music"));
  dock.appendChild(createButton("ğŸ’¬", "AI Chat", "chatBtn"));
  dock.appendChild(createButton("ğŸŒ", "Browser"));
  dock.appendChild(createButton("ğŸï¸", "Media"));
  dock.appendChild(createButton("âš™ï¸", "Settings"));

  // ==========================
  // CHAT PANEL
  // ==========================
  const chatPanel = createDiv("chat-panel", "chatPanel");

  const chatHeader = createDiv("chat-header");
  const chatTitle = document.createElement("span");
  chatTitle.textContent = "VORTEX AI";

  const closeChatBtn = createButton("âœ–", "Close Chat", "closeChat");
  closeChatBtn.style.background = "transparent";

  chatHeader.appendChild(chatTitle);
  chatHeader.appendChild(closeChatBtn);

  const chatMessages = createDiv("chat-messages", "chatMessages");

  const firstMsg = createDiv("msg ai");
  firstMsg.textContent = "Hello ğŸ‘‹ Iâ€™m VORTEX AI. (Chat is still offline right now.)";
  chatMessages.appendChild(firstMsg);

  const chatInputWrap = createDiv("chat-input");
  const chatInput = document.createElement("input");
  chatInput.id = "chatInput";
  chatInput.placeholder = "Type a message...";

  const sendBtn = createButton("Send", "Send Message", "sendBtn");

  chatInputWrap.appendChild(chatInput);
  chatInputWrap.appendChild(sendBtn);

  chatPanel.appendChild(chatHeader);
  chatPanel.appendChild(chatMessages);
  chatPanel.appendChild(chatInputWrap);

  // ==========================
  // APPEND EVERYTHING TO BODY
  // ==========================
  document.body.appendChild(background);
  document.body.appendChild(vignette);
  document.body.appendChild(topHud);
  document.body.appendChild(logo);
  document.body.appendChild(dock);
  document.body.appendChild(chatPanel);

  // ==========================
  // CLOCK (TOGGLE FORMAT)
  // ==========================
  let useMilitaryTime = true;

  function formatTime(date) {
    let hours = date.getHours();
    let minutes = date.getMinutes();
    minutes = String(minutes).padStart(2, "0");

    if (useMilitaryTime) {
      return `${String(hours).padStart(2, "0")}:${minutes}`;
    } else {
      const ampm = hours >= 12 ? "PM" : "AM";
      hours = hours % 12 || 12;
      return `${hours}:${minutes} ${ampm}`;
    }
  }

  function updateTime() {
    const now = new Date();
    timeEl.textContent = formatTime(now);
  }

  updateTime();
  setInterval(updateTime, 1000);

  timeEl.style.cursor = "pointer";
  timeEl.style.userSelect = "none";
  timeEl.style.padding = "6px 12px";
  timeEl.style.borderRadius = "10px";
  timeEl.style.transition = "0.2s";

  timeEl.addEventListener("mouseenter", () => {
    timeEl.style.background = "rgba(255,255,255,0.12)";
  });

  timeEl.addEventListener("mouseleave", () => {
    timeEl.style.background = "transparent";
  });

  timeEl.addEventListener("click", () => {
    useMilitaryTime = !useMilitaryTime;
    updateTime();
  });

  // ==========================
  // WEATHER ICON FUNCTION
  // ==========================
  function getWeatherIcon(code) {
    if (code === 0) return "â˜€ï¸";
    if ([1, 2].includes(code)) return "ğŸŒ¤ï¸";
    if (code === 3) return "â˜ï¸";
    if ([45, 48].includes(code)) return "ğŸŒ«ï¸";
    if ([51, 53, 55].includes(code)) return "ğŸŒ¦ï¸";
    if ([56, 57].includes(code)) return "ğŸŒ§ï¸";
    if ([61, 63, 65].includes(code)) return "ğŸŒ§ï¸";
    if ([66, 67].includes(code)) return "ğŸŒ§ï¸";
    if ([71, 73, 75, 77].includes(code)) return "â„ï¸";
    if ([85, 86].includes(code)) return "ğŸŒ¨ï¸";
    if ([80, 81, 82].includes(code)) return "ğŸŒ§ï¸";
    if ([95, 96, 99].includes(code)) return "â›ˆï¸";
    return "ğŸŒ¡ï¸";
  }

  // ==========================
  // WEATHER (TOGGLE Â°F / Â°C)
  // ==========================
  let useFahrenheit = true;

  let lastWeatherData = {
    tempF: null,
    tempC: null,
    city: null,
    icon: null
  };

  function displayWeather() {
    if (!lastWeatherData.city) {
      tempEl.textContent = "Weather unavailable";
      return;
    }

    const temp = useFahrenheit ? lastWeatherData.tempF : lastWeatherData.tempC;
    const unit = useFahrenheit ? "Â°F" : "Â°C";

    tempEl.textContent = `${lastWeatherData.icon} ${temp}${unit} â€¢ ${lastWeatherData.city}`;
  }

  async function updateWeather() {
    if (!navigator.geolocation) {
      tempEl.textContent = "Location not supported";
      return;
    }

    tempEl.textContent = "Loading...";

    navigator.geolocation.getCurrentPosition(
      async (pos) => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;

        try {
          // Get weather (Celsius by default)
          const weatherUrl =
            `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;

          const weatherRes = await fetch(weatherUrl);
          const weatherData = await weatherRes.json();

          const tempC = Math.round(weatherData.current_weather.temperature);
          const tempF = Math.round((tempC * 9) / 5 + 32);

          const code = weatherData.current_weather.weathercode;
          const icon = getWeatherIcon(code);

          // Reverse geocode city
          const geoUrl =
            `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&count=1`;

          const geoRes = await fetch(geoUrl);
          const geoData = await geoRes.json();

          const city = geoData.results?.[0]?.city || "Unknown";

          lastWeatherData.tempC = tempC;
          lastWeatherData.tempF = tempF;
          lastWeatherData.city = city;
          lastWeatherData.icon = icon;

          displayWeather();
        } catch (err) {
          console.error("Weather fetch failed:", err);
          tempEl.textContent = "Weather unavailable";
        }
      },
      () => {
        tempEl.textContent = "Location denied";
      }
    );
  }

  updateWeather();
  setInterval(updateWeather, 600000);

  tempEl.style.cursor = "pointer";
  tempEl.style.userSelect = "none";
  tempEl.style.padding = "6px 12px";
  tempEl.style.borderRadius = "10px";
  tempEl.style.transition = "0.2s";

  tempEl.addEventListener("mouseenter", () => {
    tempEl.style.background = "rgba(255,255,255,0.12)";
  });

  tempEl.addEventListener("mouseleave", () => {
    tempEl.style.background = "transparent";
  });

  tempEl.addEventListener("click", () => {
    useFahrenheit = !useFahrenheit;
    displayWeather();
  });

  // ==========================
  // CHAT OPEN / CLOSE
  // ==========================
  document.getElementById("chatBtn").addEventListener("click", () => {
    chatPanel.classList.toggle("open");
  });

  closeChatBtn.addEventListener("click", () => {
    chatPanel.classList.remove("open");
  });

  // ==========================
  // CHAT MESSAGE SYSTEM (FAKE)
  // ==========================
  function addMessage(text, type) {
    const msg = document.createElement("div");
    msg.className = `msg ${type}`;
    msg.textContent = text;
    chatMessages.appendChild(msg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function sendMessage() {
    const text = chatInput.value.trim();
    if (!text) return;

    addMessage(text, "user");
    chatInput.value = "";

    setTimeout(() => {
      addMessage("ğŸ¤– (Prototype) " + text, "ai");
    }, 500);
  }

  sendBtn.addEventListener("click", sendMessage);

  chatInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") sendMessage();
  });

</script>

</body>
</html>
