<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VORTEX</title>
</head>
<body>

<script>
  // ==========================
  // GLOBAL STYLE
  // ==========================
  const style = document.createElement("style");
  style.textContent = `
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      color: white;
      background: black;
    }

    /* ===== Animated Background ===== */
    .background {
      position: fixed;
      inset: 0;
      background: linear-gradient(120deg, #000000, #1a1a1a, #111, #000);
      background-size: 400% 400%;
      animation: bgMove 12s ease infinite;
      z-index: -3;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Vignette overlay */
    .vignette {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle, rgba(0,0,0,0.1) 20%, rgba(0,0,0,0.95) 90%);
      z-index: -2;
    }

    /* ===== Top HUD ===== */
    .top-hud {
      position: fixed;
      top: 18px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 180px;
      font-size: 22px;
      opacity: 0.9;
      letter-spacing: 1px;
      z-index: 5;
    }

    /* ===== Center Logo ===== */
    .logo {
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 80px;
      font-weight: 600;
      letter-spacing: 8px;

      background: linear-gradient(to bottom, #ffffff, #777777);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;

      text-shadow: 0px 0px 25px rgba(255,255,255,0.12);
      opacity: 0.9;
      z-index: 3;
    }

    /* ===== Bottom Dock (SLEEK SVG ICONS) ===== */
    .dock {
      position: fixed;
      bottom: 35px;
      left: 50%;
      transform: translateX(-50%);
      padding: 14px 28px;
      display: flex;
      gap: 18px;
      align-items: center;

      border-radius: 50px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(18px);

      box-shadow: 0px 8px 35px rgba(0,0,0,0.65);
      z-index: 10;
    }

    .dock button {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      border: none;

      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);

      cursor: pointer;
      transition: 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.9;
    }

    .dock button:hover {
      transform: scale(1.15);
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      opacity: 1;
    }

    .dock button:active {
      transform: scale(1.05);
    }

    .dock svg {
      width: 22px;
      height: 22px;
      stroke: white;
      stroke-width: 2;
      fill: none;
      opacity: 0.95;
    }

    /* ===== Chat Panel ===== */
    .chat-panel {
      position: fixed;
      right: -380px;
      top: 0;
      width: 360px;
      height: 100vh;
      background: rgba(0,0,0,0.75);
      border-left: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(14px);
      transition: 0.3s ease;
      z-index: 20;
      display: flex;
      flex-direction: column;
    }

    .chat-panel.open {
      right: 0;
    }

    .chat-header {
      padding: 18px;
      font-size: 18px;
      font-weight: bold;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-header button {
      background: transparent;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      opacity: 0.7;
    }

    .chat-header button:hover {
      opacity: 1;
    }

    .chat-messages {
      flex: 1;
      padding: 18px;
      overflow-y: auto;
      font-size: 14px;
      line-height: 1.4;
    }

    .msg {
      margin-bottom: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      max-width: 90%;
      white-space: pre-wrap;
    }

    .msg.ai {
      background: rgba(0, 90, 255, 0.22);
      border: 1px solid rgba(0, 90, 255, 0.28);
    }

    .msg.user {
      margin-left: auto;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
    }

    .chat-input {
      padding: 14px;
      border-top: 1px solid rgba(255,255,255,0.12);
      display: flex;
      gap: 10px;
    }

    .chat-input input {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: rgba(255,255,255,0.08);
      color: white;
    }

    .chat-input button {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background: rgba(255,255,255,0.12);
      color: white;
      font-weight: bold;
      transition: 0.2s;
    }

    .chat-input button:hover {
      background: rgba(255,255,255,0.18);
    }
  `;
  document.head.appendChild(style);

  // ==========================
  // SVG ICONS
  // ==========================
  function svgIcon(type) {
    if (type === "home") {
      return `
        <svg viewBox="0 0 24 24">
          <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z"/>
        </svg>
      `;
    }

    if (type === "apps") {
      return `
        <svg viewBox="0 0 24 24">
          <rect x="4" y="4" width="6" height="6" rx="1"></rect>
          <rect x="14" y="4" width="6" height="6" rx="1"></rect>
          <rect x="4" y="14" width="6" height="6" rx="1"></rect>
          <rect x="14" y="14" width="6" height="6" rx="1"></rect>
        </svg>
      `;
    }

    if (type === "chat") {
      return `
        <svg viewBox="0 0 24 24">
          <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/>
        </svg>
      `;
    }

    if (type === "settings") {
      return `
        <svg viewBox="0 0 24 24">
          <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
          <path d="M19.4 15a7.7 7.7 0 0 0 .1-1l2-1.5-2-3.5-2.4.7a7.6 7.6 0 0 0-1.7-1l-.4-2.5h-4l-.4 2.5a7.6 7.6 0 0 0-1.7 1l-2.4-.7-2 3.5 2 1.5a7.7 7.7 0 0 0 .1 1 7.7 7.7 0 0 0-.1 1l-2 1.5 2 3.5 2.4-.7a7.6 7.6 0 0 0 1.7 1l.4 2.5h4l.4-2.5a7.6 7.6 0 0 0 1.7-1l2.4.7 2-3.5-2-1.5a7.7 7.7 0 0 0-.1-1z"/>
        </svg>
      `;
    }

    if (type === "power") {
      return `
        <svg viewBox="0 0 24 24">
          <path d="M12 2v10"/>
          <path d="M6.4 4.9a9 9 0 1 0 11.2 0"/>
        </svg>
      `;
    }

    return "";
  }

  // ==========================
  // HELPER FUNCTIONS
  // ==========================
  function createDiv(className, id) {
    const div = document.createElement("div");
    if (className) div.className = className;
    if (id) div.id = id;
    return div;
  }

  function createDockButton(iconType, title, id) {
    const btn = document.createElement("button");
    btn.innerHTML = svgIcon(iconType);
    btn.title = title;
    if (id) btn.id = id;
    return btn;
  }

  // ==========================
  // BUILD UI
  // ==========================
  const background = createDiv("background");
  const vignette = createDiv("vignette");

  const topHud = createDiv("top-hud");
  const timeEl = createDiv(null, "time");
  const tempEl = createDiv(null, "temp");

  timeEl.textContent = "--:--";
  tempEl.textContent = "Loading...";

  topHud.appendChild(timeEl);
  topHud.appendChild(tempEl);

  const logo = createDiv("logo");
  logo.textContent = "VORTEX";

  const dock = createDiv("dock");
  dock.appendChild(createDockButton("home", "Home"));
  dock.appendChild(createDockButton("apps", "Apps"));
  dock.appendChild(createDockButton("chat", "AI Chat", "chatBtn"));
  dock.appendChild(createDockButton("settings", "Settings"));
  dock.appendChild(createDockButton("power", "Power"));

  // ==========================
  // CHAT PANEL
  // ==========================
  const chatPanel = createDiv("chat-panel", "chatPanel");

  const chatHeader = createDiv("chat-header");
  chatHeader.innerHTML = `
    <span>VORTEX AI</span>
    <button id="closeChat">âœ–</button>
  `;

  const chatMessages = createDiv("chat-messages", "chatMessages");
  const firstMsg = createDiv("msg ai");
  firstMsg.textContent = "Hello ðŸ‘‹ Iâ€™m VORTEX AI. (Chat is still offline right now.)";
  chatMessages.appendChild(firstMsg);

  const chatInputWrap = createDiv("chat-input");
  const chatInput = document.createElement("input");
  chatInput.placeholder = "Type a message...";
  chatInput.id = "chatInput";

  const sendBtn = document.createElement("button");
  sendBtn.textContent = "Send";

  chatInputWrap.appendChild(chatInput);
  chatInputWrap.appendChild(sendBtn);

  chatPanel.appendChild(chatHeader);
  chatPanel.appendChild(chatMessages);
  chatPanel.appendChild(chatInputWrap);

  // ==========================
  // APPEND TO BODY
  // ==========================
  document.body.appendChild(background);
  document.body.appendChild(vignette);
  document.body.appendChild(topHud);
  document.body.appendChild(logo);
  document.body.appendChild(dock);
  document.body.appendChild(chatPanel);

  // ==========================
  // CLOCK TOGGLE
  // ==========================
  let useMilitaryTime = true;

  function formatTime(date) {
    let hours = date.getHours();
    let minutes = String(date.getMinutes()).padStart(2, "0");

    if (useMilitaryTime) {
      return `${String(hours).padStart(2, "0")}:${minutes}`;
    } else {
      const ampm = hours >= 12 ? "PM" : "AM";
      hours = hours % 12 || 12;
      return `${hours}:${minutes} ${ampm}`;
    }
  }

  function updateTime() {
    timeEl.textContent = formatTime(new Date());
  }

  updateTime();
  setInterval(updateTime, 1000);

  timeEl.style.cursor = "pointer";
  timeEl.style.userSelect = "none";

  timeEl.addEventListener("click", () => {
    useMilitaryTime = !useMilitaryTime;
    updateTime();
  });

  // ==========================
  // WEATHER ICONS (TEXT ICONS)
  // ==========================
  function getWeatherIcon(code) {
    if (code === 0) return "â˜€ï¸";
    if ([1, 2].includes(code)) return "ðŸŒ¤ï¸";
    if (code === 3) return "â˜ï¸";
    if ([45, 48].includes(code)) return "ðŸŒ«ï¸";
    if ([51, 53, 55].includes(code)) return "ðŸŒ¦ï¸";
    if ([61, 63, 65].includes(code)) return "ðŸŒ§ï¸";
    if ([71, 73, 75, 77].includes(code)) return "â„ï¸";
    if ([80, 81, 82].includes(code)) return "ðŸŒ§ï¸";
    if ([95, 96, 99].includes(code)) return "â›ˆï¸";
    return "ðŸŒ¡ï¸";
  }

  // ==========================
  // WEATHER TOGGLE
  // ==========================
  let useFahrenheit = true;

  let lastWeatherData = {
    tempF: null,
    tempC: null,
    city: null,
    icon: null
  };

  function displayWeather() {
    if (!lastWeatherData.city) {
      tempEl.textContent = "Weather unavailable";
      return;
    }

    const temp = useFahrenheit ? lastWeatherData.tempF : lastWeatherData.tempC;
    const unit = useFahrenheit ? "Â°F" : "Â°C";

    tempEl.textContent = `${lastWeatherData.icon} ${temp}${unit} â€¢ ${lastWeatherData.city}`;
  }

  async function updateWeather() {
    if (!navigator.geolocation) {
      tempEl.textContent = "Location not supported";
      return;
    }

    tempEl.textContent = "Loading...";

    navigator.geolocation.getCurrentPosition(
      async (pos) => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;

        try {
          const weatherUrl =
            `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code`;

          const weatherRes = await fetch(weatherUrl);
          const weatherData = await weatherRes.json();

          const tempC = Math.round(weatherData.current.temperature_2m);
          const tempF = Math.round((tempC * 9) / 5 + 32);

          const code = weatherData.current.weather_code;
          const icon = getWeatherIcon(code);

          const geoUrl =
            `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&count=1`;

          const geoRes = await fetch(geoUrl);
          const geoData = await geoRes.json();

          const city = geoData.results?.[0]?.city || "Unknown";

          lastWeatherData.tempC = tempC;
          lastWeatherData.tempF = tempF;
          lastWeatherData.city = city;
          lastWeatherData.icon = icon;

          displayWeather();
        } catch (err) {
          console.error("Weather fetch failed:", err);
          tempEl.textContent = "Weather unavailable";
        }
      },
      (err) => {
        console.error("Geolocation error:", err);
        tempEl.textContent = "Location denied";
      }
    );
  }

  updateWeather();
  setInterval(updateWeather, 600000);

  tempEl.style.cursor = "pointer";
  tempEl.style.userSelect = "none";

  tempEl.addEventListener("click", () => {
    useFahrenheit = !useFahrenheit;
    displayWeather();
  });

  // ==========================
  // CHAT OPEN / CLOSE
  // ==========================
  document.getElementById("chatBtn").addEventListener("click", () => {
    chatPanel.classList.toggle("open");
  });

  document.getElementById("closeChat").addEventListener("click", () => {
    chatPanel.classList.remove("open");
  });

  // ==========================
  // FAKE CHAT SYSTEM
  // ==========================
  function addMessage(text, type) {
    const msg = document.createElement("div");
    msg.className = `msg ${type}`;
    msg.textContent = text;
    chatMessages.appendChild(msg);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function sendMessage() {
    const text = chatInput.value.trim();
    if (!text) return;

    addMessage(text, "user");
    chatInput.value = "";

    setTimeout(() => {
      addMessage("ðŸ¤– (Prototype) " + text, "ai");
    }, 500);
  }

  sendBtn.addEventListener("click", sendMessage);

  chatInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") sendMessage();
  });

</script>

</body>
</html>
